<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico"/>

    <title>VTEX Product Finder</title>

    <!-- Bootstrap core CSS -->


    
	<script src="../js/jquery-3.4.1.min.js" th:href="@{/js/jquery-3.4.1.min.js}"></script>
	<script src="../js/bootstrap.js" th:href="@{/js/bootstrap.js}"></script>
	<link href="../css/bootstrap.css" rel="stylesheet" th:href="@{/css/bootstrap.css}"/>
	
<!-- 	<link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"> -->
<!-- 	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"> -->

	<script type="text/javascript">  
    
		$( document ).ready(function() {
			var urlDetalle = "/datos";	
	        $.getJSON(urlDetalle, function (data) {
	        	
	        	var jumboData = data.Jumbo;	        	
	        	$('#jumboFecha').text(jumboData.fechaEjecucion);
				$('#jumboCantProductos').text(jumboData.cantProductos);
				$('#jumboCantImagenes').text(jumboData.cantImagenes);
				
				var walmartData = data.Jumbo;	        	
	        	$('#walmartFecha').text(walmartData.fechaEjecucion);
				$('#walmartCantProductos').text(walmartData.cantProductos);
				$('#walmartCantImagenes').text(walmartData.cantImagenes);
				
				var diaonlineData = data.Jumbo;	        	
	        	$('#diaonlineFecha').text(diaonlineData.fechaEjecucion);
				$('#diaonlineCantProductos').text(diaonlineData.cantProductos);
				$('#diaonlineCantImagenes').text(diaonlineData.cantImagenes);
				
				var fravegaData = data.Jumbo;	        	
	        	$('#fravegaFecha').text(fravegaData.fechaEjecucion);
				$('#fravegaCantProductos').text(fravegaData.cantProductos);
				$('#fravegaCantImagenes').text(fravegaData.cantImagenes);
				
			});
		});
	
	    $(function() { 
		    $('#jumboProc').on('click', function() {
				$("#jumboButtonProc").hide();
				$("#jumboButtonProc2").show();
		        var urlDetalle = "/Jumbo/procesar";	
		        $.getJSON(urlDetalle, function (data) {
					var cantCategorias = data.cantCategorias;
					$('#jumboFecha').text(data.fechaUltimaActualizacion);
					$('#jumboCantProductos').text(data.cantProductos);
					$('#jumboCantImagenes').text(data.cantImagenes);
					$("#jumboButtonProc2").hide();
					$("#jumboButtonProc").show();
				});
		    });
	    });  
// 	    $(function() { 
// 		    $('#walmartProc').on('click', function() {
// 		        var $this = $(this);
// 		        $this.button('loading');
// 		        var urlDetalle = "/walmart/procesar";	
// 		        $.getJSON(urlDetalle, function (data) {
// 					var cantCategorias = data.cantCategorias;
// 					$('#walmartFecha').text(data.fechaUltimaActualizacion);
// 					$('#walmartCantProductos').text(data.cantProductos);
// 					$('#walmartCantImagenes').text(data.cantImagenes);
// 					$this.button('reset');
// 				});
// 		    });
// 	    });  

		
		
	</script>
</head>
<body style=" background-color: lightblue;">

<div class="container">
    <!-- Static navbar -->
	<BR/>
	<nav class="navbar navbar-expand-lg navbar-light bg-light" style="border-radius:5px;">

	  <div class="collapse navbar-collapse" id="navbarText">
	    <ul class="navbar-nav mr-auto">
	      <li class="nav-item active">
	        <a class="nav-link" href="#">HOME <span class="sr-only">(current)</span></a>
	      </li>
	      <li class="nav-item">
	        <a class="nav-link" href="#">Imagenes</a>
	      </li>
	      <li class="nav-item">
	        <a class="nav-link" href="#">API Rest</a>
	      </li>
	    </ul>
	    <span class="navbar-text">
	      <a class="nav-link" href="#">Ayuda</a>
	    </span>
	  </div>
	</nav>
	<BR/>
    <!-- Main component for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
		  <h1 align="center">Libertad VTEX Panel</h1>
		  <br/>
		  <table class="table">
		   <thead>
		    <tr>
		     <th scope="col">eCommerce</th>
		     <th scope="col">Ultima ejecucion</th>
		     <th scope="col">Productos Procesados</th>
		     <th scope="col">Imagenes Procesadas</th>
		     <th scope="col">Acciones</th>
		    </tr>
		   </thead>
		   <tbody>
		    <tr>
		     <th scope="row" style="font-size: 21px;">Jumbo</th>
		     <td> <p id="jumboFecha" /></td>
		     <td> <p id="jumboCantProductos" /></td>
		     <td> <p id="jumboCantImagenes" /></td>
		     <td>
		     	 <div id="jumboButtonProc">
			     	<button type="button" class="btn btn-primary" id="jumboProc">Procesar</button>
			     </div>
			     <div id="jumboButtonProc2" style="display:none;">
				     <button class="btn btn-primary" type="button" disabled>
				     		&nbsp;&nbsp;&nbsp;&nbsp;
						  <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
							&nbsp;&nbsp;&nbsp;&nbsp;
					</button>
				</div>
		     </td>
		    </tr>
		    <tr>
		     <th scope="row" style="font-size: 21px;">Walmart</th>
		     <td> <p id="walmartFecha" /></td>
		     <td> <p id="walmartCantProductos" /></td>
		     <td> <p id="walmartCantImagenes" /></td>
		     <td>
				<button type="button" class="btn btn-primary" id="walmartProc"
				 data-loading-text="<i class='fa fa-spinner fa-spin'></i> Procesando">Procesar</button>
		     </td>
		    </tr>
		    <tr>
		     <th scope="row" style="font-size: 21px;">DiaOnline</th>
		     <td> <p id="diaonlineFecha" /></td>
		     <td> <p id="diaonlineCantProductos" /></td>
		     <td> <p id="diaonlineCantImagenes" /></td>
		     <td>
		     	<button type="button" class="btn btn-primary" id="diaProc" 
		     	data-loading-text="<i class='fa fa-spinner fa-spin'></i> Procesando">Procesar</button>
		     </td>
		    </tr>
		    <tr>
		     <th scope="row" style="font-size: 21px;">Fravega</th>
		     <td> <p id="fravegaFecha" /></td>
		     <td> <p id="fravegaCantProductos" /></td>
		     <td> <p id="fravegaCantImagenes" /></td>
		     <td>
		     	<button type="button" class="btn btn-primary" id="fravegaProc" 
		     	data-loading-text="<i class='fa fa-spinner fa-spin'></i> Procesando">Procesar</button>
		     </td>
		    </tr>
		   </tbody>
		  </table>
		 </div>
    </div>
</div> <!-- /container -->
<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<!--     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> -->



</body>
</html>